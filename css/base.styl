@import nib
@import _common

html
  height: 100%
  font-size: 16px
  background: #fff
  overflow-y: scroll

body
  background: transparent

body, input, td, textarea
  line-height: 1.5
  body-type()
  color: $txt

*
  text-rendering: optimizeLegibility
  -webkit-font-smoothing: antialiased

/* ----------------------------------------------------------------------------
 * Base styles
 */

.body
  &
    padding: 10px
    box-sizing: border-box

  @media (min-width: 480px) /* Tablet & Desktop */
    padding: 30px 10px

  @media (min-width: 768px) /* Desktop */
    padding: 50px 10px

a
  text-decoration: none

  &, &:visited
    color: $txt

  &:hover, &:active
    color: $red

/* ----------------------------------------------------------------------------
 * Modes
 */

html
  &
    background: #fff
  &.desktop
    transition: background 200ms linear
  &.service-instagram
    background: $instagram-bg
  &.service-tumblr
    background: $tumblr-bg
  &.service-flickr
    background: $flickr-bg
  &.service-twitter
    background: $twitter-bg

/* ----------------------------------------------------------------------------
 * Webfont load
 */

html
  body
    opacity: 0
    transition: opacity 300ms linear
  &.wf-active body, &.wf-inactive body
    opacity: 1

/* ----------------------------------------------------------------------------
 * Header
 */

.main-heading
  clearfix()

  .logo
    font-size: 3em
    text-transform: uppercase
    color: $txt

  .desktop & .logo
    transition: color 200ms linear

  .service & .logo
    color: white
    white-text-shadow()

  margin-bottom: 50px

  .logo, .menu
    float: left
    margin-right: 20px

    height: 30px
    line-height: 30px

.menu
  clearfix()
  -webkit-backface-visibility: hidden

  a
    float: left
    margin-right: 0

    color: white
    text-decoration: none
    white-text-shadow()

    display: block

    position: relative
    text-align: center

    width: 12px
    transition: width 300ms ease

  a i
    display: block

    position: absolute
    top: 0
    left: 0
    right: 10px
    bottom: 0
    z-index: 1

    background: $red
    transform: skew(-30deg)
    transition: background 150ms linear

  // Full background (when it's hovered, or when heading isn't hovered)
  a.link-flickr i
    background: $flickr-bg
  a.link-instagram i
    background: $instagram-bg
  a.link-twitter i
    background: $twitter-bg
  a.link-tumblr i
    background: $tumblr-bg

  // White background
  a.active
    i
      background: white
    span
      color: $txt
      text-shadow: none

  span
    position: relative
    z-index: 2
    padding: 0
    opacity: 0
    padding-right: 10px

    font-weight: bold
    font-size: 0.9em
    transition: opacity 50ms linear

  a:hover, a.active,
  .main-heading:hover & a /* <- remove this selector to enable the old style */
    width: 100px

    span
      opacity: 1
      transition: opacity 50ms linear 130ms

    &:hover i
      opacity: 0.8
    &.active i
      opacity: 1


/* ----------------------------------------------------------------------------
 * Entry listing
 */

.listing-page
  margin: 0 auto

  @media (min-width: 480px)
    width: ($cell * 2 + $gut * 1)
  @media (min-width: 768px)
    width: ($cell * 3 + $gut * 2)
  @media (min-width: 1024px)
    width: ($cell * 4 + $gut * 3)
  @media (min-width: 1280px)
    width: ($cell * 5 + $gut * 4)

.entry-list
  clearfix()

  @media (min-width: 480px) /* Tablet & Desktop */
    &
      margin-right: (-1 * $gut)

    .entry-item
      float: left

      &, .image
        width: $cell
        height: $cell

/* ----------------------------------------------------------------------------
 * Entry item
 */

.entry-item
  &
    margin: 0 0 10px 0
    transition: opacity 300ms linear 300ms
    opacity: 1
    transform: translate3d(0,0,0)
    position: relative

  &.hide
    opacity: 0
    transition: opacity 300ms linear

  // Placeholders
  &.placeholder
    display: none

    @media (min-width: 768px) /* Desktop */
      display: block

  // Custom sizes
  @media (min-width: 768px) /* Desktop */
    &.w2
      &, .image
        width: ($cell * 2 + $gut * 1)
    &.h2
      &, .image
        height: ($cell * 2 + $gut * 1)
    &.w3
      &, .image
        width: ($cell * 3 + $gut * 2)
    &.h3
      &, .image
        height: ($cell * 3 + $gut * 2)

  @media (min-width: 480px) /* Tablet & Desktop */
    margin: 0 $gut $gut 0

  .image
    background: rgba(black, 0.1)

  .image, .meta
    overflow: hidden
    word-wrap: break-word

  &, .image, .meta
    box-sizing: border-box

  // Invisible link
  a.link
    display: block
    absolute: 0 0
    width: 100%
    height: 100%
    z-index: 10

  // Date displays
  .date, .date-ago
    text-transform: uppercase
    font-weight: bold
    font-size: 0.9em

.entry-text
  .meta
    max-height: 100%
    -webkit-mask-image: -webkit-gradient(linear, left 80%, left bottom, from(rgba(0,0,0,1)), to(rgba(0,0,0,0)))

/* ----------------------------------------------------------------------------
 * Image entries
 */

.entry-image
  .image
    display: block
    @media (min-width: 480px) /* Tablet & Desktop */
      absolute: 0 0
      width: 100%
      height: 100%

  .date
    display: none

  .meta
    background: rgba($red, $hover-strength)

    @media (min-width: 480px) /* Tablet & Desktop */
      opacity: 0
      transition: all $spd ease
      transform: scale(0.95) translate3d(0,0,0)
      position: absolute
      top: -10px
      left: -10px
      bottom: -10px
      right: -10px
      overflow: hidden

  .meta > div
    padding: 20px
    color: white
    text-shadow: 0 2px 2px rgba(black, 0.2)

    @media (min-width: 480px) /* Tablet & Desktop */
      position: absolute
      top: 0
      left: 0
      bottom: 0
      right: 0

      -webkit-mask-image: -webkit-gradient(linear, left 80%, left bottom, from(rgba(0,0,0,1)), to(rgba(0,0,0,0)))

  &.service-flickr .meta
    background: rgba($flickr-bg, $hover-strength)
  &.service-instagram .meta
    background: rgba($instagram-bg, $hover-strength)
  &.service-twitter .meta
    background: rgba($twitter-bg, $hover-strength)
  &.service-tumblr .meta
    background: rgba($tumblr-bg, $hover-strength)

  .meta .text
    font-size: 1.3em
    line-height: 1.10

  .meta .date-ago:before
    small-hr(15px, white)

  &:hover, &.active
    .meta
      transform: scale(1.0) translate3d(0,0,0)
      opacity: 1

  // Extra text sizes
  @media (min-width: 768px) /* Desktop */
    &.w1
      & .text
        font-size: 1.1em
        line-height: 1.18
      &.text-short .text
        font-size: 1.3em
        line-height: 1.1

    &.w2
      & .text
        font-size: 2em
      &.text-medium .text
        font-size: 2.65em
      &.text-short .text
        font-size: 4em

/* ----------------------------------------------------------------------------
 * Text entries
 */

.entry-text
  a.link
    display: none

  .image
    display: none

  .text
    font-size: 1em
    line-height: 1.38

  .date:after
    small-hr(15px, $red)

  .date-ago
    display: none

/*
 * Debug mode
 */

.debug
  article, .entry-list
    outline: solid 1px cyan


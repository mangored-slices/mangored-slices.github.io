@import nib
@import _common

/* ----------------------------------------------------------------------------
 * Entry listing
 */

.listing-page
  margin: 0 auto

  @media (min-width: 480px)
    width: ($cell * 2 + $gut * 1)
  @media (min-width: 768px)
    width: ($cell * 3 + $gut * 2)
  @media (min-width: 1024px)
    width: ($cell * 4 + $gut * 3)
  @media (min-width: 1280px)
    width: ($cell * 5 + $gut * 4)

.entry-list
  clearfix()

  @media (min-width: 480px) /* Tablet & Desktop */
    &
      margin-right: (-1 * $gut)

    .entry-item
      float: left

      &, .image
        width: $cell
        height: $cell

    // For jaggedness
    article:nth-child(10n+2)
      margin-top: $gut * 2

/* ----------------------------------------------------------------------------
 * Entry item
 */

.entry-item
  &
    margin: 0 0 10px 0
    transition: opacity 300ms linear 300ms
    opacity: 1
    transform: translate3d(0,0,0)
    position: relative

  &.hide
    opacity: 0
    transition: opacity 300ms linear
    pointer-events: none

  // Placeholders
  &.placeholder
    display: none

    @media (min-width: 768px) /* Desktop */
      display: block
      height: $cell*0.6

  // Custom sizes
  @media (min-width: 768px) /* Desktop */
    &.w2
      &, .image
        width: ($cell * 2 + $gut * 1)
    &.h2
      &, .image
        height: ($cell * 2 + $gut * 1)
    &.w3
      &, .image
        width: ($cell * 3 + $gut * 2)
    &.h3
      &, .image
        height: ($cell * 3 + $gut * 2)

  @media (min-width: 480px) /* Tablet & Desktop */
    margin: 0 $gut $gut 0

  .image
    background: rgba(black, 0.1)

  .image, .meta
    overflow: hidden
    word-wrap: break-word

  &, .image, .meta
    box-sizing: border-box

  // Invisible link
  a.link
    display: block
    absolute: 0 0
    width: 100%
    height: 100%
    z-index: 10

  @media (max-width: 480px) /* Mobile */
    a.link
      display: none

  // Date displays
  .date, .date-ago
    text-transform: uppercase
    body-xbold-type()
    font-size: 0.9em

/* ----------------------------------------------------------------------------
 * Text entries
 */

.entry-text
  @media (min-width: 480px) /* Tablet & Desktop */
    .meta
      height: 100%
      -webkit-mask-image: -webkit-gradient(linear, left 80%, left bottom, from(rgba(0,0,0,1)), to(rgba(0,0,0,0)))

  // Text
  .text strong
    body-bold-type()
    &:after
      content: 'â€”'
      margin-left: 0.4em
      opacity: 0.5

  a.link, .image
    display: none

  .text
    font-size: 1em
    line-height: 1.38 * $lh

  .date:after
    small-hr(15px, $red)

  .date-ago
    display: none

/* ----------------------------------------------------------------------------
 * Image entries
 */

.entry-image
  .image
    display: block
    @media (min-width: 480px) /* Tablet & Desktop */
      absolute: 0 0
      width: 100%
      height: 100%

    @media (max-width: 480px) /* Mobile */
      img
        width: 100%
        margin: 0 0 -10px 0

  .date
    display: none

  .meta
    background: rgba($red, $hover-strength)

    @media (min-width: 480px) /* Tablet & Desktop */
      opacity: 0
      transition: all $spd ease
      transform: scale(0.95) translate3d(0,0,0)
      position: absolute
      top: -10px
      left: -10px
      bottom: -10px
      right: -10px
      overflow: hidden

  .meta > div
    padding: 20px
    color: white
    text-shadow: 0 2px 2px rgba(black, 0.2)

    @media (min-width: 480px) /* Tablet & Desktop */
      position: absolute
      top: 0
      left: 0
      bottom: 0
      right: 0

      -webkit-mask-image: -webkit-gradient(linear, left 80%, left bottom, from(rgba(0,0,0,1)), to(rgba(0,0,0,0)))

  &.service-flickr .meta
    background: rgba($flickr-bg, $hover-strength)
  &.service-instagram .meta
    background: rgba($instagram-bg, $hover-strength)
  &.service-twitter .meta
    background: rgba($twitter-bg, $hover-strength)
  &.service-tumblr .meta
    background: rgba($tumblr-bg, $hover-strength)

  .meta .text
    font-size: 1.3em
    // line-height: 1.3 * $lh
    line-height: 1.3 // -- $acta

  .meta .date-ago:before
    small-hr(15px, white)

  @media (min-width: 480px) /* Tablet & Desktop */
    &:hover, &.active
      .meta
        transform: scale(1.0) translate3d(0,0,0)
        opacity: 1

    // Disappear on hover of first-of-type
    &.active:hover
      .meta
        transform: scale(0.95) translate3d(0,0,0)
        opacity: 0

  // Extra text sizes
  @media (min-width: 768px) /* Desktop */
    &.w1
      & .text
        font-size: 1.1em
        line-height: 1.18 * $lh
      &.text-short .text
        font-size: 1.3em
        line-height: 1.1 * $lh

    &.w2
      & .text
        font-size: 2em
      &.text-medium .text
        font-size: 2.65em
      &.text-short .text
        font-size: 4em


